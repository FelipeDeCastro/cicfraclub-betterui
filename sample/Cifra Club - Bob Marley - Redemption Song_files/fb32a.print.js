(self.webpackChunkcifraclub=self.webpackChunkcifraclub||[]).push([[740],{3104:function(e){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=65)}({65:function(e,t,n){e.exports=n(66)},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CapoEvent=void 0,t.CapoEvent={OPENED_FROM_SIDEBAR:"capo_sidebar_abrir",OPENED_FROM_BODY:"capo_corpo_abrir",REMOVED:"capo_remover",ADDED:"capo_adicionar",CHANGED:"capo_trocar",RESET:"capo_reset"}}})},3475:function(e){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=198)}({198:function(e,t,n){e.exports=n(199)},199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=e.storageKey,n=void 0===t?"cc_syncer_settings":t,o=e.persistableKeys,i=void 0===o?[]:o,r=e.recoverCallbacks,a=void 0===r?{}:r;this.storageKey=n,this.persistableKeys=i,this.recoverCallbacks=a}return e.prototype.setLocalStorageData=function(e){try{window.localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){}},e.prototype.getLocalStorageData=function(){try{return JSON.parse(window.localStorage.getItem(this.storageKey))||{}}catch(e){return{}}},e.prototype.sync=function(e,t){var n=this;void 0===t&&(t={});var o=this.getLocalStorageData(),i=!1;this.persistableKeys.forEach((function(r){Object.hasOwnProperty.call(t,r)?(o[r]=t[r],i=!0):Object.hasOwnProperty.call(o,r)&&o[r]!==e[r]&&"function"==typeof n.recoverCallbacks[r]&&n.recoverCallbacks[r](o[r])})),i&&this.setLocalStorageData(o)},e}();t.default=o}})},3864:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(4002),i=n.n(o),r=n(2192),a=n(2396),s=n(5063),c=n(6484),l=n(3104);function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.settings={sideModal:{position:"middle right",offset:"0 20",className:"modal--left"},bodyModal:{position:"middle right",offset:"0 20",className:"modal--left"}},i().extend(!0,this.settings,t),s.t.originalCapo=e,s.t.capo=e,this.lastCapo=e,this.elements={modal:i()("#c-capo"),songCapo:i()("#cifra_capo"),sidebarTrigger:i()("#side-capotraste")},this.modal=new a.u(this.elements.modal),this.bindEvents()}},{key:"setValue",value:function(e){(e<0||e>12)&&(e=s.t.originalCapo),s.t.capo=e>>0,i()(document).trigger("song.chords")}},{key:"showCapoAt",value:function(e){var t=this.elements.modal.find("li");t.removeClass("on"),e&&t.eq(e-1).addClass("on")}},{key:"getValueFromModal",value:function(){return this.elements.modal.find("li.on").text()>>0}},{key:"closeModalOnClickOutside",value:function(e){this.elements.modal.is(e.target)||0!==this.elements.modal.has(e.target).length||this.elements.sidebarTrigger.is(e.target)||0!==this.elements.sidebarTrigger.has(e.target).length||this.elements.songCapo.is(e.target)||0!==this.elements.songCapo.has(e.target).length||this.modal.close()}},{key:"bindEvents",value:function(){var e=this;this.elements.modal.on("click","li:not(.on)",(function(t){e.showCapoAt(e.elements.modal.find("li").index(t.currentTarget)+1)})).on("click","li > .btn-close, li.on",(function(){e.showCapoAt(0)})).on("click",".js-ok",(function(){e.setValue(e.getValueFromModal()),i()(document).trigger("song.settings"),e.modal.close(),e.lastCapo!==s.t.capo&&(s.t.capo!==s.t.originalCapo?0===s.t.capo?(0,r.cifraEvent)(l.CapoEvent.REMOVED):(0,r.cifraEvent)(0===s.t.originalCapo?l.CapoEvent.ADDED:l.CapoEvent.CHANGED):(0,r.cifraEvent)(l.CapoEvent.RESET),e.lastCapo=s.t.capo)})).on("click",".js-cancel",(function(){e.modal.close()})).on("open",(function(){var t=i()(e.modal.target).is(e.elements.sidebarTrigger);e.elements.modal.removeClass(e.settings.sideModal.className+" "+e.settings.bodyModal.className).addClass(t?e.settings.sideModal.className:e.settings.bodyModal.className),e.showCapoAt(s.t.capo),(0,r.cifraEvent)(t?l.CapoEvent.OPENED_FROM_SIDEBAR:l.CapoEvent.OPENED_FROM_BODY),i()(document).on("click",(function(t){e.closeModalOnClickOutside(t)}))})).on("close",(function(){i()(document).off("click",(function(t){e.closeModalOnClickOutside(t)}))})),this.elements.sidebarTrigger.on("click",this.getEventHandler(this.settings.sideModal.position,this.settings.sideModal.offset)),this.elements.songCapo.on("click","a",this.getEventHandler(this.settings.bodyModal.position,this.settings.bodyModal.offset))}},{key:"getEventHandler",value:function(e,t){var n=this;return function(o){i()(n.modal.target).is(o.currentTarget)?n.modal.toggle():(n.modal.setTarget(n.elements.sidebarTrigger,e,t),n.modal.open())}}},{key:"updateUI",value:function(){if("guitar"===s.t.chordMode)return this.elements.songCapo.html(0!==s.t.capo?c.polyglot.t("song.capoOn",{capo:s.t.capo}):""),void this.elements.sidebarTrigger.show();this.elements.songCapo.empty(),this.elements.sidebarTrigger.hide()}},{key:"reset",value:function(){this.showCapoAt(s.t.originalCapo),this.setValue(s.t.originalCapo)}}],n&&d(t.prototype,n),o&&d(t,o),e}())},5785:(e,t,n)=>{"use strict";n.d(t,{QL:()=>h,Ri:()=>f,UL:()=>b,Vl:()=>g,dT:()=>k,jv:()=>C,kc:()=>p,qL:()=>m});var o=n(4002),i=n.n(o),r=n(5063),a=n(8094),s=n(8105),c=n(8732),l=n(6484);function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var f=1366;function h(){throw(0,s.Ik)(r.t.cifraId),(0,c.O)(l.polyglot.t("song.splitColumnsError")),new Error("Erro ao dividir colunas: tabs corrompidas na cifra")}function g(){var e=function(e){for(var t=e.split("\n"),n=parseInt(t.length/2,10)+1,o=n;o<t.length;o++)if(-1!==t[o].indexOf("##break##")){n=o;break}return[t.splice(0,n).join("\n").replace(/##break##/g,""),t.join("\n").replace(/##break##/g,"")]}(p());i()(r.t.container).find("pre").html(e[0]).addClass("col1"),i()(r.t.container).append('<pre class="col2">'+e[1]+"</pre>"),i()(r.t.container).addClass("cols")}function p(){var e=r.t.cifraContent.replace(/<span class="tablatura"(.+\")?>(.|[\n\r])+?<\/span>\s*<\/span>/g,"##TAB##"),t=m(r.t.cifraContent),n=45,o=document.querySelector(".cifra_cnt");o&&(window.innerWidth<f&&!r.t.splitColumns?n=Math.ceil(o.offsetWidth/(10+r.t.fontSize-14))-2:r.t.fontSize!==a.J.standardFontSize&&(n=Math.ceil(o.offsetWidth/2/(10+r.t.fontSize-14))-2));var i=C(t,n),c=function(e,t){var n=e.split("\n"),o="",i=!1,r="";if(n)for(var a=0;a<n.length;a++)if(o=T(n[a]),i)i=!1;else if(0!==o.length)if((0,s.pY)(o))if(a+1<n.length&&!(0,s.pY)(n[a+1])){var c=T(n[a+1]);r+="##break##".concat(k([o,c],t)),i=!0}else r+="##break##".concat(b(o,t,!0));else r+="##break##".concat(b(o,t,!1));else{var l=n[a-1],d=n[a+1];r+=l&&l.indexOf("##TAB##")>=0||(d&&d.indexOf("##TAB##"))>=0?"":"\n"}return r}(e,n),l=0;return c.replace(/##TAB##/g,(function(){var e=i[l];return l+=1,e.replace(/(undefined)/g,"").replace(/,/g,"")}))}var m=function(e){var t=[],n=[];return e.replace(/<\/?u[^>]*>/g,"").replace(/<span class="tablatura"(.+\")?>(.|[\n\r])+?<\/span>\s*<\/span>/g,(function(e){return t.push(e),e.replace(/\<([\/?\s?\w]+)\>/gm,"")})),t.length&&t.forEach((function(e){var t={preText:"",contentText:""};t.preText=e.replace(/<span class="cnt"(.+\")?>(.|[\n\r])+?<\/span>\s*<\/span>/g,"").replace('<span class="tablatura">',"");var o=e.match(/<span class="cnt"(.+\")?>(.|[\n\r])+?<\/span>\s*<\/span>/g);t.contentText=o?o.join().replace(/<span class="cnt">|<\/span>\s*<\/span>/g,""):"",n.push(t)}),[]),n},v=["-"," ","|"];var y=["<","b","/",">","(",")","[","]",void 0,null,"#"];function C(e,t){var n=[],o=[];e.forEach((function(e){var i=e.contentText,r=void 0===i?"":i,a=e.preText,s=void 0===a?"":a,c=[],l=[],u=r.split("\n").reduce((function(e,t){return e>t.length?e:t.length}),0),f=[];r.split("\n").map((function(e,t){for(var n=0;n<=u;n++)!f[t]&&e[n]?f[t]=e[n]:e[n]?f[t]+=e[n]:f[t]+=" "}));for(var h=f.reduce((function(e,n){return[].concat(d(e),d(function(e,t){var n,o=e.split(""),i=[],r="",a=[];for(var s in o){var c=s,l=o[c];n=l,v.includes(n)?(a.length>0&&a[0]!==Math.floor(c/t)&&r.length>=1&&c-r.length>0&&i.push(c-r.length),r="",a=[]):(r+=l,a.push(Math.floor(c/t)))}return i}(n,t)))}),[]),g=0,p=f;g<p.length;g++){for(var m=p[g],C=[""],b=0,k=0,S=0;S<m.length;S++){if(h.length>0&&h.includes(S)&&(k+=1,C[(b=Math.floor(S/t)+k)-1]&&c.length<=5&&(C[b]="".concat(C[b-1].substring(0,1),"|"))),b>0&&C[S/t])C[b]+=m[S];else 0!==S&&S%t==0&&m[S]&&c.length<=5?C[S/t-1]&&(C[Math.floor(S/t)]?C[Math.floor(S/t)]+="".concat(C[S/t-1].substring(0,1),"|").concat(m[S]):C[Math.floor(S/t)]="".concat(C[S/t-1].substring(0,1),"|").concat(m[S])):C[Math.floor(S/t)]+=m[S]}c.push(C)}var T,w=0,_=0,O=s.split("\n"),E="";O.forEach((function(e){e.indexOf("<")<0&&e.indexOf(".")<0?E+="\n"+e:Array(e.length).fill(null).map((function(o,i){y.indexOf(e[i])>-1&&w++;var r=(i-w)/(n[i]&&n[i][0][0].length||t);"<"===e[i]&&"/"!==e[i+1]?(T=!0,_=Math.floor((i-w)/((n[i]&&n[i][0][0].length||t)-5))>r?r+1:r):" "===e[i]&&(T=!1,_=0);var a=Math.floor(T?_:r);l[a>=0?a:0]?l[a>=0?a:0]+=e[i]:l[a>=0?a:0]=e[i]}))}));var j=l.length>0?l.map((function(e,t){return t>0?"  ".concat(l[t]):E+l[t]})):/[A-Za-z]/g.test(E)?[E]:[];o.push(j),n.push(c)}));var i=[];n.forEach((function(e){var t=[];e.forEach((function(e){e.forEach((function(e,n){t[n]?t[n]+=e+"\n":t[n]=e+"\n"}))}));var n=t.map((function(e){var t=e.replace(/undefined/g,"");if(d(t.match(/([A-Z])|(-|\||e)|[ \t]/g)).join("").trim().length!==t.trim().length-5)return e.replace(/\n\s*\n/g,"\n")}));i.push(n)}));var r=i.map((function(e,t){var n=e.map((function(e,n){return e?(o[t][n]||"")+"\n"+e:""}));return'<span class="tablatura">'.concat(n,"</span>")}));return r}function b(e,t,n){for(var o,i="";e.length;)w(e).length>t?(i+=(o=S(e,t,n))+"\n",e=e.slice(o.length)):(i+=e+"\n",e="");return i}function k(e,t){for(var n=["",""],o={line:[e[0].length,e[1].length],modified:[0,0],striped:[0,0]},i="";o.line[0]||o.line[1];)o.striped=[w(e[0]).length,w(e[1]).length],o.striped[0]>t||o.striped[1]>t?(n[0]=S(e[0],t,!0),n[1]=S(e[1],t,!1),o.modified[0]=w(n[0]).length,o.modified[1]=n[1].length,o.modified[0]&&o.modified[1]&&(o.modified[0]<o.modified[1]&&w(e[0]).length>t?(n[1]=S(e[1],o.modified[0],!1),o.modified[1]=n[1].length):o.modified[1]<o.modified[0]&&w(e[1]).length>t&&(n[0]=S(e[0],o.modified[1],!0),o.modified[0]=w(n[0]).length)),i+=o.modified[0]&&T(n[0]).length?n[0]+"\n":"",i+=o.modified[1]?n[1]+"\n":"",o.modified[0]&&!o.modified[1]&&(i+="\n"),e[0]=e[0].slice(n[0].length),e[1]=e[1].slice(o.modified[1]),o.line[0]=e[0].length,o.line[1]=e[1].length):(i+=(o.line[0]?e[0]+"\n":"")+(o.line[1]?e[1]+"\n":""),o.line[0]&&!o.line[1]&&(i+="\n"),o.line[0]=0,o.line[1]=0);return i}function S(e,t,n){if(n&&(t+=2*(T(w(e).slice(0,t)).replace(/\s{2,}/g," ").split(" ").length-1),e=e.replace(/<b(.*?)>/gi,"@").replace(/<\/b>/gi,"$")),-1!==e.indexOf(" ")&&e.length>t){if(" "!==e.charAt(t))for(;" "!==e.charAt(t-1);)if(0===--t)return e;e=e.slice(0,t)}return n?e.replace(/@/g,"<b>").replace(/\$/g,"</b>"):e}function T(e){return e.replace(/(\s)*$/,"")||""}function w(e){return e.replace(/(<div .*>.*?<\/div>?)/gi,"").replace(/<\/?(.*?)>/gim,"")}},8018:(e,t,n)=>{"use strict";n.d(t,{j:()=>d});var o=n(4002),i=n.n(o),r=n(2192),a=n(2396),s=n(8105),c=n(5063);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(e){this.settings={modalPosition:"bottom right",modalOffset:"-45 20"},i().extend(!0,this.settings,e);var t=i()("#c-exibir");this.elements={btnListItem:i()("#js-side-display"),btn:i()("#side-exibir"),modal:t,tabsCheck:t.find('[name="tabs"]'),columnsCheck:t.find('[name="columns"]'),bodyChordsCheck:t.find('[name="chords-body"]'),footerChordsCheck:t.find('[name="chords-footer"]'),leftHandedCheck:t.find('[name="left-handed"]')},this.modal=new a.u(this.elements.modal,this.elements.btnListItem,this.settings.modalPosition,this.settings.modalOffset),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;this.elements.btnListItem.on("click",(function(){e.elements.btn.toggleClass("on"),e.elements.modal.toggleClass("on")})),this.elements.tabsCheck.on("change",(function(){c.t.showTabs=!c.t.showTabs,c.t.showTabs?s.$Z():s.Cp(),i()(document).trigger("song.settings"),r.cifraEvent("tablaturas_"+(c.t.showTabs?"on":"off")),i()(document).trigger("scroller.updateStartSpeed")})),this.elements.columnsCheck.on("change",(function(e){var t=i()(e.currentTarget).prop("checked");c.t.splitColumns=t,i()(document).trigger("song.columns",t),i()(document).trigger("song.settings"),r.cifraEvent("colunas_"+(t?"on":"off"))})),this.elements.bodyChordsCheck.on("change",(function(e){c.t.showBodyChords=i()(e.currentTarget).prop("checked"),r.cifraEvent("acordes_corpo_"+(c.t.showBodyChords?"on":"off")),i()(document).trigger("song.chords"),i()(document).trigger("song.settings"),i()(document).trigger("scroller.updateStartSpeed")})),this.elements.footerChordsCheck.on("change",(function(e){c.t.showFooterChords=i()(e.currentTarget).prop("checked"),r.cifraEvent("acordes_rodape_"+(c.t.showFooterChords?"on":"off")),i()(document).trigger("song.renderfooterchords"),i()(document).trigger("song.settings")})),this.elements.leftHandedCheck.on("change",(function(e){c.t.leftHanded=i()(e.currentTarget).prop("checked"),r.cifraEvent("acordes_canhoto_"+(c.t.leftHanded?"on":"off")),i()(document).trigger("song.chords"),i()(document).trigger("song.settings")}))}},{key:"updateModal",value:function(){if("keyboard"===c.t.chordMode)return this.elements.modal.find("li").hide(),this.elements.columnsCheck.prop("checked",c.t.splitColumns).closest("li").show(),void this.elements.footerChordsCheck.prop("checked",c.t.showFooterChords).closest("li").show();this.elements.modal.find("li").show(),"cavaco"===c.t.chordMode||"ukulele"===c.t.chordMode||"viola"===c.t.chordMode?this.elements.tabsCheck.closest("li").hide():this.elements.tabsCheck.prop("checked",c.t.showTabs),this.elements.footerChordsCheck.prop("checked",c.t.showFooterChords),this.elements.bodyChordsCheck.prop("checked",c.t.showBodyChords),this.elements.columnsCheck.prop("checked",c.t.splitColumns),this.elements.leftHandedCheck.prop("checked",c.t.leftHanded)}},{key:"showBodyChords",value:function(){c.t.showBodyChords=!0,i()(document).trigger("song.chords")}},{key:"hideFooterChords",value:function(){c.t.showFooterChords=!1,i()(document).trigger("song.renderfooterchords")}},{key:"hideTabs",value:function(){c.t.showTabs=!1,s.Cp()}},{key:"setLeftHanded",value:function(){c.t.leftHanded=!0,i()(document).trigger("song.chords")}},{key:"reset",value:function(){this.reload(!1),c.t.showTabs?s.$Z():s.Cp(),i()(document).trigger("song.columns",[!1]),i()(document).trigger("song.renderfooterchords"),i()(document).trigger("song.chords"),i()(document).trigger("song.settings"),this.updateModal()}},{key:"reload",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c.t.showTabs="guitar"===c.t.chordMode,c.t.splitColumns=!1,c.t.showBodyChords=!1,c.t.showFooterChords=!0,c.t.leftHanded=!1,e&&this.updateModal()}}],n&&l(t.prototype,n),o&&l(t,o),e}())},9338:(e,t,n)=>{"use strict";n.d(t,{U:()=>u});var o=n(4002),i=n.n(o),r=n(5063),a=n(3132),s=n(8052),c=n(3248),l=n(5424);function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;this.downloadButton=i()("#js-sg-dwl"),this.updateUI(),this.downloadButton.click((function(t){t.preventDefault(),e.download()}))}},{key:"download",value:function(){var e={name:"".concat(r.t.artistName," - ").concat(r.t.songTitle,".txt"),txt:this.generateSongText()};l.post("version/download",e).then((function(t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),n.setAttribute("download",e.name),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})).catch((function(){return null}))}},{key:"generateSongText",value:function(){var e,t="",n=r.t.chordMode,o=a.d.chords,l=r.t.capo,d=l-c.TUNINGS.indexOf(r.t.tuning);return t+=r.t.artistName+" - "+r.t.songTitle+"\n\n",t+=i()(".cifra_cnt > pre").text()+"\n\n",-1!==["guitar","cavaco","ukulele","viola"].indexOf(n)&&(t+="----------------- Acordes -----------------\n",0!==l&&(t+="Capotraste na "+l+"ª casa\n"),o.forEach((function(o){e=o.defaultMountIndex[n],"string"==typeof o.mounts[n][e]&&(t+=o.name+(0!==d?"* ":"")+" = "+o.mounts[n][e],0!==d&&(t+=" - (*"+s.noteUtil.getTransposedChord(o.name,d)+" na forma de "+o.name+")"),t+="\n")}))),t}},{key:"updateUI",value:function(){["guitar","cavaco","ukulele","viola"].indexOf(r.t.chordMode)>-1?this.downloadButton.show():this.downloadButton.hide()}}])&&d(t.prototype,n),o&&d(t,o),e}())},8094:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var o=n(4002),i=n.n(o),r=n(2192),a=n(9490),s=n(5063),c=n(5785),l=n(3972);function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"init",value:function(e){this.defaultConfig={contentSelector:".cifra_cnt",fontSizes:a.consts.fontSizes},this.config=i().extend({},this.defaultConfig,e),this.elements={fontButtonsContainer:i()("#side-font"),fontLess:i()("#side-font-less"),fontMore:i()("#side-font-more"),fontRestore:i()("#side-font-restore")},this.fontSizes=this.config.fontSizes,this.updateStandard(),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;this.elements.fontLess.click((function(){e.decreaseSize(),i()(document).trigger("song.font"),i()(document).trigger("song.settings"),r.cifraEvent("fonte_diminuir")})),this.elements.fontMore.click((function(){e.increaseSize(),i()(document).trigger("song.font"),i()(document).trigger("song.settings"),r.cifraEvent("fonte_aumentar")})),this.elements.fontRestore.click((function(){e.restoreSize(),i()(document).trigger("song.font"),i()(document).trigger("song.settings"),r.cifraEvent("fonte_restaurar")}))}},{key:"decreaseSize",value:function(){s.t.fontSize>this.fontSizes.min&&(s.t.fontSize-=1,this.updateSize())}},{key:"increaseSize",value:function(){s.t.fontSize<this.fontSizes.max&&(s.t.fontSize+=1,this.updateSize())}},{key:"restoreSize",value:function(){s.t.splitColumns?(s.t.fontSize=this.fontSizes.splitColumnsStandard,this.standardFontSize=this.fontSizes.splitColumnsStandard):(s.t.fontSize=this.fontSizes.standard,this.standardFontSize=this.fontSizes.standard),this.updateSize()}},{key:"getCorrectSize",value:function(e){var t=parseInt(e,10);return isNaN(t)&&(t=this.standardFontSize),t<this.fontSizes.min&&(t=this.fontSizes.min),t>this.fontSizes.max&&(t=this.fontSizes.max),t}},{key:"setValue",value:function(e){var t=this.getCorrectSize(e);s.t.fontSize=t,this.updateSize(),i()(document).trigger("song.font")}},{key:"updateSize",value:function(){s.t.fontSize===this.standardFontSize?(i()(this.config.contentSelector).css("font-size",""),this.elements.fontButtonsContainer.removeClass("alter")):(i()(this.config.contentSelector).css("font-size",s.t.fontSize),this.elements.fontButtonsContainer.addClass("alter")),window.location.href.indexOf("/imprimir.html")<0&&(l.vl(),s.t.splitColumns&&c.Vl())}},{key:"updateStandard",value:function(){this.standardFontSize=s.t.splitColumns?this.config.fontSizes.splitColumnsStandard:this.config.fontSizes.standard,s.t.fontSize=this.standardFontSize}}])&&d(t.prototype,n),o&&d(t,o),e}())},3972:(e,t,n)=>{"use strict";n.d(t,{AG:()=>j,ZP:()=>z,vl:()=>M});var o=n(4002),i=n.n(o),r=n(2192),a=n(5785),s=n(8105),c=n(5248),l=n(3248),d=n(5063),u=n(3132),f=n(4034),h=n(8018),g=n(3864),p=n(5629),m=n(7405),v=n(8817),y=n(8955),C=n(3214),b=n(9338),k=n(6484),S=n(4839),T=n(8732),w=n(4813);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){var e=d.t.originalCifraContent,t=d.t.tabs;if(t){var n=0;e=e.replace(/<span class="cnt">((.|[\n\r])+?)<\/span>/g,(function(){var e=t[n];return n+=1,'<span class="cnt">'.concat(e.replace(/#t2#|#\/t2#/g,""),"</span>")}))}e=e.replace(/<b>(.*)<\/b>/g,(function(e){var t=e.match(/<b>(.*?)<\/b>/g),n=0,o=t?t.map((function(t){var o=e.indexOf(t,n);return n=o+t.length,{value:t,index:o}})):[],i="";return o.forEach((function(t,n){var r=u.d.chords.find((function(e){var n=t.value.slice(3,-4),o=e.originalChord,i=e.altName;return n===(o||i)})),a=r?"<b>".concat(r[d.t.chordsNameFlag],"</b>"):t.value,s=o[n+1];if(s){var c=t.index+Math.max(t.value.length,a.length),l=s.index,f=e.substring(c,l);i+="".concat(a).concat(f)}else i+=a})),i})),d.t.cifraContentWithTabs=e,d.t.cifraContent=e}function M(){if(i()(d.t.container).find("pre").eq(1).remove(),i()(d.t.container).find("pre").removeClass("col1"),i()(d.t.container).find("pre").removeAttr("style"),i()(d.t.container).removeClass("cols"),window.innerWidth>a.Ri)i()(d.t.container).find("pre").html(d.t.cifraContent);else{var e=a.kc().replace(/##break##/g,"");i()(d.t.container).find("pre").html(e)}if(d.t.tabsError){var t=(0,v.$d)(d.t.key,d.t.capo,d.t.tuning);(0,T.O)(k.polyglot.t("song.tabsError",{key:t}))}}function x(){f.C.updateBodyChords(),f.C.updateFooterChords(),g.Z.updateUI(),p.M.updateUI(),v.ZP.animateLabel(),v.ZP.updateHtml(),C.l.update()}function I(e){M(),d.t.splitColumns?P():d.t.showBodyChords&&f.C.updateBodyChords(),i()(document).trigger("scroller.updateStartSpeed")}function P(){if(d.t.splitColumns)try{a.Vl(),i()(".cifra-column--left").addClass("cifra-column--twoColumnsContent"),i()(".js-banner-player").remove(),m.F.videoPlayer.togglePlayerOnTwoColumns(),m.F.videoPlayer.closeMiniPlayerSize=w.X.BIG,m.F.videoPlayer.size!==w.X.BIG&&(m.F.videoPlayer.size=0,m.F.videoPlayer.resizePlayer(0))}catch(e){h.j.elements.columnsCheck[0].checked=d.t.splitColumns}else m.F.videoPlayer.togglePlayerOnTwoColumns(),i()(".cifra-column--left").removeClass("cifra-column--twoColumnsContent"),m.F.videoPlayer.closeMiniPlayerSize=w.X.NORMAL,M();d.t.showBodyChords&&f.C.updateBodyChords()}function L(){"cifra"===d.t.instrument&&C.l.onPlayerResize(m.F.videoPlayer.size)}const z={init:function(){i()(d.t.container).find("span.tablatura").length,i()(document).off("song.chords").on("song.chords",(function(){x()})),i()(document).off("song.instrument").on("song.instrument",(function(e,t){!function(e){var t=-1!==l.TUNINGS.indexOf(d.t.tuning)?d.t.tuning:d.t.originalTuning,n=d.t.capo-l.TUNINGS.indexOf(t);h.j.updateModal(),b.U.updateUI(),"keyboard"===d.t.chordMode&&(d.t.showBodyChords=!1);var o="guitar"===d.t.chordMode||"guitar"!==d.t.chordMode&&(d.t.key!==d.t.originalKey||d.t.capo!==d.t.originalCapo||d.t.tuning!==d.t.originalTuning);e.blockTranspose||0===n||"guitar"!==e.oldChordMode&&"guitar"!==d.t.chordMode?x():v.ZP.setValue(d.t.key+n*("guitar"===d.t.chordMode?-1:1),o);var i=history.state&&history.state.songbookOriginId;c.a1({cifraId:d.t.cifraId,type:d.t.type,songId:d.t.songId,artistId:d.t.artistId,tone:(0,v.Ck)(d.t.key),tuning:d.t.tuning,capo:d.t.capo,artist:d.t.artistName,name:d.t.songTitle,url:"".concat(d.t.url,"#instrument=").concat(d.t.chordMode,"&tabs=false"),urlAPI:d.t.urlAPI,image:d.t.image},i),i&&history.replaceState(O(O({},history.state),{},{songbookOriginId:0}),""),r.cifraEvent("acordes_".concat({guitar:"violao",keyboard:"teclado",cavaco:"cavaco",ukulele:"ukulele",viola:"viola"}[d.t.chordMode]))}(t)})),i()(document).off("song.transpose").on("song.transpose",(function(){j(),(0,s.Vx)(),M(),x(),d.t.splitColumns&&P(),x()})),i()(document).off("song.tabs").on("song.tabs",(function(e){I(0)})),i()(document).off("song.columns").on("song.columns",(function(){P()})),i()(document).off("song.font").on("song.font",(function(){d.t.isTranslated&&y.Z.syncLines(),i()(document).trigger("scroller.updateStartSpeed")})),i()(document).off("song.resizePlayer",L).on("song.resizePlayer",L),i()(document).off("song.settings").on("song.settings",(function(){S.Z.save()})),i()(document).off("song.renderfooterchords").on("song.renderfooterchords",(function(){d.t.showFooterChords?f.C.updateFooterChords():i()(".cifra_acordes").hide()})),i()(document).off("song.updateCifraHTML").on("song.updateCifraHTML",(function(){M()})),document.addEventListener("song.removeBanner",(function(){d.t.cifraContent.indexOf("<div")&&(d.t.cifraContent=d.t.cifraContent.replace(/[\n]<div .+?><\/div>/,""),M())}))}}},4839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(486),i=n.n(o),r=n(5063),a=n(3864),s=n(8094),c=n(8817),l=n(5629),d=n(8018),u=n(913),f=n(3248);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hash=new(i()),this.hash.init(),this.updatePrint=e,this.printLink=e?document.getElementById("js-print"):null;var t={capo:{key:"capo",originalKey:"originalCapo"},key:{key:"key",originalKey:"originalKey"},tuning:{key:"tuning",originalKey:"originalTuning"},columns:{key:"splitColumns",original:!1},bodyChords:{key:"showBodyChords",original:!1},footerChords:{key:"showFooterChords",original:!0},tabs:{key:"showTabs",original:!0},left:{key:"leftHanded",original:!1},instrument:{key:"chordMode",original:"guitar"}};this.settings=g({font:{key:"fontSize",original:s.J.standardFontSize}},"cifra"===r.t.instrument?t:{});var n=this.initHashes();return this.printLink&&this.updatePrintLink(),n}},{key:"initHashes",value:function(){var e,t={};if(void 0!==(e=this.hash.get("font"))&&s.J.setValue(e),"cifra"!==r.t.instrument)return{};void 0!==(e=this.hash.get("capo"))&&(t.capo=e>>0,a.Z.setValue(e));var n=this.hash.get("tuning");void 0!==n&&(t.tuning=l.M,l.M.setValue(n.replace(/%20/g," "))),void 0!==(e=this.hash.get("autoplay")?"guitar":this.hash.get("instrument"))&&(t.chordMode=e,u.Z.setValue(e,void 0!==o)),void 0!==(e=this.hash.get("columns"))&&(t.columns=!0),void 0!==(e=this.hash.get("bodyChords"))&&(t.showBodyChords=!0,d.j.showBodyChords()),"false"===(e=this.hash.get("footerChords"))&&(t.showFooterChords=!1,d.j.hideFooterChords()),"false"===(e=this.hash.get("tabs"))&&(t.showTabs=!1,d.j.hideTabs()),"true"===(e=this.hash.get("left"))&&(t.leftHanded=!0,d.j.setLeftHanded());var o=this.hash.get("key");return void 0!==o&&(t.key=o>>0,c.ZP.setValue(o)),d.j.updateModal(),t}},{key:"hasInstrumentHash",value:function(){return void 0!==this.hash.get("instrument")}},{key:"save",value:function(){var e=this;Object.keys(this.settings).forEach((function(t){var n=e.settings[t];void 0!==n.originalKey&&("viola"===r.t.chordMode&&"tuning"===t&&r.t.tuning!==f.VIOLA_TUNINGS[1]||"viola"===r.t.chordMode&&r.t[n.key]!==r.t[n.originalKey]||"tuning"!==t&&r.t[n.key]!==r.t[n.originalKey]?e.hash.add(t,r.t[n.key]):e.hash.remove(t)),void 0!==n.original&&("boolean"==typeof n.original?r.t[n.key]&&n.original||!r.t[n.key]&&!n.original?e.hash.remove(t):e.hash.add(t,r.t[n.key]?"true":"false"):r.t[n.key]!==n.original?e.hash.add(t,r.t[n.key]):e.hash.remove(t))})),!1!==this.updatePrint&&this.updatePrintLink()}},{key:"updatePrintLink",value:function(){var e=this.printLink.getAttribute("href").split("#");this.printLink.setAttribute("href",e[0].trim()+this.hash.getURLHash())}}],n&&m(t.prototype,n),o&&m(t,o),e}())},913:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(4002),i=n.n(o),r=n(2192),a=n(5063),s=n(8105),c=n(2762),l=n(3248);n(1885);function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.SongTypeSlug.CIFRA_GROUP,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.SongTypeSlug.GUITAR;a.t.instrument=e,a.t.chordMode=t,this.elements={controlContainers:i()("#c-ver, .cifra_acordes, #c-acordes"),selectedMode:i()("#c-ver").find(".js-ins-mode-sel").add(i()("#c-acordes").find(".js-ins-mode-sel")),selectedModeHeader:i()("#js-c-mode"),cifraLinks:i()("#js-c-v").find("[data-v=cifra] a"),linkVersion:i()(".js-version")},this.bindEvents(),t!==l.SongTypeSlug.GUITAR&&this.setChordMode(t)}},{key:"bindEvents",value:function(){var e=this;this.elements.controlContainers.on("change",".js-ins-mode",(function(t){var n=t.currentTarget;e.setValue(n.value,!1,!0),r.cifraEvent("versoes_trocar_tipo_acorde"),i()(document).trigger("song.settings"),i()(n).closest("div").hasClass("modal-inst")||i()("html, body").scrollTo(i()(n).closest(".cifra_acordes").offset().top-50)})),this.elements.linkVersion.on("click",(function(){r.cifraEvent("versoes_troca")}))}},{key:"updateUI",value:function(){var e=this;if(this.elements){var t=this.elements.controlContainers.find(".js-ins-mode");if(t.length){t.prop("checked",!1).filter("[value=".concat(a.t.chordMode,"]")).prop("checked",!0);var n=t.filter(":checked")[0].id,o=this.elements.controlContainers.find("label[for=".concat(n,"]")).text();this.elements.selectedMode.text(o),this.elements.cifraLinks.each((function(t,n){n.href=e.getSongUrl(n.href)})),a.t.instrument===l.SongTypeSlug.CIFRA_GROUP&&(this.elements.selectedModeHeader.text(" (".concat(o,")")),a.t.showTabs=a.t.chordMode===l.SongTypeSlug.GUITAR,a.t.showTabs?s.$Z(!1):s.Cp(!1)),i()(document).trigger("song.settings")}}}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=a.t.chordMode;o!==e&&(this.setChordMode(e),this.updateUI(),n&&c.Z.sync(a.t),i()(document).trigger("song.instrument",{oldChordMode:o,blockTranspose:t}))}},{key:"setChordMode",value:function(e){switch(a.t.chordMode=e,a.t.chordsNameFlag="guitar"===e?"altName":"name",e){case l.SongTypeSlug.KEYBOARD:a.t.type=l.SongType.KEYBOARD;break;case l.SongTypeSlug.CAVACO:a.t.type=l.SongType.CAVACO;break;case l.SongTypeSlug.UKULELE:a.t.type=l.SongType.UKULELE;break;case l.SongTypeSlug.VIOLA:a.t.type=l.SongType.VIOLA,-1===l.VIOLA_TUNINGS.indexOf(a.t.tuning)&&(a.t.tuning="A D F# A D");break;default:a.t.type=l.SongType.GUITAR,a.t.tuning=a.t.originalTuning}}},{key:"getSongUrl",value:function(e){var t="guitar"!==a.t.chordMode?"#instrument=".concat(a.t.chordMode):"";return e.replace(/#.*$/,"")+t}}],n&&d(t.prototype,n),o&&d(t,o),e}())},8817:(e,t,n)=>{"use strict";n.d(t,{$d:()=>v,Ck:()=>m,Q4:()=>p,ZP:()=>y});var o=n(4002),i=n.n(o),r=n(2192),a=n(5424),s=n(2396),c=n(5063),l=n(3248),d=n(6484),u=n(3132);function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(e){return(e%12+12)%12},g=function(e){return c.t.keyList.indexOf(e)},p=function(e,t,n){var o=t-l.TUNINGS.indexOf(n);return h(e+o)},m=function(e){return c.t.keyList[h(e)]},v=function(e,t,n){return m(p(e,t,n))};const y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(e,t){var n=i()("#side-tom"),o=i()("#c-tom");c.t.keyList=-1===e.indexOf("m")?l.MAJOR_KEYS:l.MINOR_KEYS,c.t.originalKeyName=e,c.t.key=g(e),c.t.originalKey=c.t.key,this.songURL=t,this.cache={},this.abortLastRequest=function(){},this.lastRequestId=null,this.elements={modal:o,modalKeys:o.find("li"),modalReset:o.find("#js-k-m-reset"),side:n,sideList:n.find("ul"),cifraKey:i()("#cifra_tom")},this.liHeight=n.find("li").first().height(),this.elements.more=this.elements.modal.find(".js-k-m").add(this.elements.side.find(".js-k-m")),this.elements.less=this.elements.modal.find(".js-k-l").add(this.elements.side.find(".js-k-l")),this.modal=new s.u(this.elements.modal),this.updateHtml(),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=function(e){return"tom_".concat(i()(e).parents("#side-tom").length>0?"sidebar_":"modal_")};this.elements.cifraKey.on("click","a",(function(t){t.preventDefault(),e.modal.setTarget(t.currentTarget,"bottom left","5 -37"),e.modal.toggle(),e.modal.opened()&&r.cifraEvent("tom_modal_abrir")})),this.elements.more.on("click",(function(n){n.preventDefault(),e.transpose(1),r.cifraEvent("".concat(t(n.currentTarget),"aumentar"))})),this.elements.less.on("click",(function(n){n.preventDefault(),e.transpose(-1),r.cifraEvent("".concat(t(n.currentTarget),"diminuir"))})),this.elements.modalKeys.on("click",(function(t){var n=e.elements.modalKeys.index(t.currentTarget),o="guitar"!==c.t.chordMode?0:c.t.capo-l.TUNINGS.indexOf(c.t.tuning);e.setValue(n-o),r.cifraEvent("tom_modal_especifico"),i()(document).trigger("song.settings")})),this.elements.modalReset.add(this.elements.sideList.find("i")).on("click",(function(n){e.reset(),r.cifraEvent("".concat(t(n.currentTarget),"restaurar"))}))}},{key:"transpose",value:function(e){this.setValue(c.t.key+e),i()(document).trigger("song.settings")}},{key:"animateLabel",value:function(){var e,t=c.t.key,n=g(c.t.originalKeyName);"guitar"!==c.t.chordMode?(e=t,n=p(n,c.t.originalCapo,c.t.originalTuning)):e=p(t,c.t.capo,c.t.tuning),this.elements.sideList.css("top",t===n?0:(e+1)*-this.liHeight)}},{key:"updateHtml",value:function(){var e="btn-black",t="guitar"!==c.t.chordMode?0:c.t.capo-l.TUNINGS.indexOf(c.t.tuning),n=m(c.t.key+t),o=t?"(".concat(d.polyglot.t("song.chord.format")," ").concat(m(c.t.key),")"):"";this.elements.modalKeys.find(".".concat(e)).removeClass(e),this.elements.modalKeys.eq(g(n)).find("button").addClass(e),this.elements.cifraKey.html("".concat(d.polyglot.t("song.key"),': <a class="js-modal-trigger" href="#" title="').concat(d.polyglot.t("song.changeKey"),'">').concat(n,"</a> ").concat(o))}},{key:"reset",value:function(){var e=g(c.t.originalKeyName),t=0;"guitar"!==c.t.chordMode&&(t=c.t.originalCapo-l.TUNINGS.indexOf(c.t.originalTuning)),this.setValue(e+t),i()(document).trigger("song.settings")}},{key:"retrieveTransposeData",value:function(){var e=this,t=c.t.key,n=c.t.chordMode,o=c.t.originalKeyName,r=c.t.originalCapo,s=c.t.tuning;return this.abortLastRequest(),new Promise((function(c){if(e.abortLastRequest=function(){c(!1),clearTimeout(e.lastRequestId)},t in e.cache)c(e.cache[t]);else{i()(document).trigger("song.pre-transpose");var d="viola"===n?0:l.TUNINGS.indexOf(s),f=g(o)+r-d,h="guitar"!==n?t-f:t-g(o);e.lastRequestId=setTimeout((function(){a.get("".concat(e.songURL,"/transpose"),{halfSteps:h,newFormat:!0}).then((function(n){e.cache[t]={tabs:n.tabs,chords:u.d.convertAPIChords(n.chords),tabsError:n.tabsError},c(e.cache[t])}),(function(){return c(!1)})).catch((function(){return null}))}),300)}})).then((function(e){return e&&(c.t.tabs=e.tabs,c.t.tabsError=e.tabsError,u.d.setChords(e.chords)),e}))}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c.t.key=h(e),t?this.retrieveTransposeData().then((function(e){e&&i()(document).trigger("song.transpose")})).catch((function(){return null})):i()(document).trigger("song.transpose"),this.animateLabel(),this.updateHtml()}}],n&&f(t.prototype,n),o&&f(t,o),e}())},8955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(4002),i=n.n(o),r=n(5063);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.elements={originalLines:i()(".letra-l .l_row"),translatedLines:i()(".letra-t .l_row")},r.t.isTranslated=e,e&&this.syncLines()}},{key:"syncLines",value:function(){this.elements.originalLines.add(this.elements.translatedLines).css("height","");for(var e=0;e<this.elements.translatedLines.length;e++){var t=this.elements.translatedLines.eq(e),n=this.elements.originalLines.eq(e);t.height()>n.height()?n.height(t.height()):t.height(n.height())}}}],n&&a(t.prototype,n),o&&a(t,o),e}())},2762:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(5063),i=n(913),r=n(3475),a=new(n.n(r)())({storageKey:"cc_song_settings",persistableKeys:["chordMode"],recoverCallbacks:{chordMode:function(e){"cifra"===o.t.instrument?i.Z.setValue(e):(o.t.chordMode=e,i.Z.updateUI())}}});const s={sync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.sync(o.t,e)}}},8105:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>u,Cp:()=>f,G5:()=>p,Ik:()=>m,Q9:()=>g,Vx:()=>h,pY:()=>l});var o=n(4002),i=n.n(o),r=n(5063),a=n(5424),s=null,c=/<span class="tablatura"(.+\")?>(.|[\n\r])+?<\/span>\s*<\/span>/;function l(e){return/<b.+?<\/b>/i.test(e)}function d(e){return e.replace(new RegExp(c.source,"g"),"").replace(/\n\s*\n/g,"\n\n")}function u(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.t.cifraContentWithTabs&&(r.t.cifraContent=r.t.cifraContentWithTabs,r.t.cifraContentWithTabs=void 0),i()(document).trigger("song.tabs",[e])}function f(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.t.cifraContentWithTabs=r.t.cifraContent,r.t.cifraContent=d(r.t.cifraContentWithTabs),i()(document).trigger("song.tabs",[e])}function h(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.t.showTabs?u(e):f(e)}function g(e){return e.search(/<span class="tablatura"(.+\")?>/i)>-1}function p(e,t){var n=e.slice(t,t+11).join("\n").match(c);return n?n[0].split("\n"):[]}function m(e){s!==e&&(s=e,(0,a.post)("version/malformed-tab/".concat(e)))}},5629:(e,t,n)=>{"use strict";n.d(t,{M:()=>h});var o=n(4002),i=n.n(o),r=n(2192),a=n(3248),s=n(5063),c=n(6484),l=n(6539),d=n(3334);function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f="",h=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.TUNINGS[0];s.t.originalTuning=e,s.t.tuning=e;var t=i()("#tuner-modal-wrapper");this.elements={modal:t,tunerIframe:i()("#js-tuner-iframe-tmpl"),selectList:t.find("#js-afi-guitar").find("select"),selectListViola:t.find("#js-afi-viola").find("select"),songTuning:i()("#cifra_afi"),sidebarTrigger:i()("#side-afinacao")},this.bindEvents()}},{key:"bindEvents",value:function(){this.setIframeUrl(),this.openTunerModal(),this.changeActualTuning(),this.cancelTuningChange(),this.playStringSounds(),this.updateDisplayedStrings()}},{key:"getTunerUriByLanguage",value:function(e){var t="?lang=".concat(e);return"pt-BR"===e?"https://www.cifraclub.com.br/_/afinador/":"https://www.cifraclub.com.br/_/afinador/".concat(t)}},{key:"setIframeUrl",value:function(){var e=(0,d.Z)().language;f=this.getTunerUriByLanguage(e)}},{key:"setValue",value:function(e){-1===a.TUNINGS.indexOf(e)&&-1===a.VIOLA_TUNINGS.indexOf(e)||(s.t.tuning=e,i()(document).trigger("song.chords"))}},{key:"setModalStrings",value:function(e){for(var t=this.elements.modal.find("#js-afi-guitar").find("b"),n=e.split(" "),o=0;o<t.length;o++)t[o].innerHTML=n[o]}},{key:"changeActualTuning",value:function(){var e=this;this.elements.modal.on("click",".js-ok",(function(){e.setValue(s.t.type===a.SongType.VIOLA?e.elements.selectListViola.val():e.elements.selectList.val()),e.elements.modal.hide(),r.cifraEvent("afinacao_trocar",s.t.tuning),i()(document).trigger("song.settings"),i()("body").css("overflow","auto"),e.elements.modal.find(".tuner-frame").attr("src","")}))}},{key:"cancelTuningChange",value:function(){var e=this,t=this.elements.modal;i()(t).on("click",(function(n){i()(n.target).hasClass("js-close")&&(t.hide(),i()("body").css("overflow","auto"),e.elements.modal.find(".tuner-frame").attr("src",""))}))}},{key:"openTunerModal",value:function(){var e=this,t=[this.elements.sidebarTrigger,this.elements.songTuning];i().each(t,(function(t,n){n.on("click",(function(){r.cifraEvent("afinacao_abrir"),e.elements.modal.find(".tuner-frame").attr("src",f),i()("body").css("overflow","hidden"),s.t.type===a.SongType.VIOLA?(e.elements.selectListViola.val(s.t.tuning),e.elements.modal.find("#js-afi-guitar").hide(),e.elements.modal.find("#js-afi-viola").show()):(e.elements.selectList.val(s.t.tuning),e.elements.modal.find("#js-afi-viola").hide(),e.elements.modal.find("#js-afi-guitar").show(),e.setModalStrings(s.t.tuning)),e.elements.modal.css("display","flex")}))}))}},{key:"playStringSounds",value:function(){var e=this;this.elements.modal.on("click",".js-tun-st",(function(t){if(t.preventDefault(),s.t.type!==a.SongType.VIOLA){var n=e.elements.modal.find(".js-tun-st").index(t.currentTarget),o=e.elements.selectList.val();(0,l.playSound)({instrument:a.SongTypeSlug.GUITAR,mount:"0 0 0 0 0 0",index:n,tuning:o,trigger:i()(t.currentTarget)[0]})}}))}},{key:"updateDisplayedStrings",value:function(){var e=this;this.elements.selectList.on("change",(function(t){e.setModalStrings(t.currentTarget.value)}))}},{key:"updateUI",value:function(){return s.t.chordMode===a.SongTypeSlug.GUITAR?(this.elements.songTuning.html(s.t.tuning!==a.TUNINGS[0]?"".concat(c.polyglot.t("song.tuning"),": <a title='").concat(c.polyglot.t("song.changeTuning"),"'>").concat(s.t.tuning,"</a>"):""),void this.elements.sidebarTrigger.show()):s.t.chordMode===a.SongTypeSlug.VIOLA?(this.elements.songTuning.html("".concat(c.polyglot.t("song.tuning"),": <a title='").concat(c.polyglot.t("song.changeTuning"),"'>").concat(a.VIOLA_TUNING_NAMES[a.VIOLA_TUNINGS.indexOf(s.t.tuning)],"</a>")),void this.elements.sidebarTrigger.show()):(this.elements.songTuning.empty(),void this.elements.sidebarTrigger.hide())}},{key:"reset",value:function(){s.t.tuning=s.t.originalTuning}}],n&&u(t.prototype,n),o&&u(t,o),e}())},2141:(e,t,n)=>{"use strict";n.r(t),n.d(t,{init:()=>L});var o=n(4002),i=n.n(o),r=n(2192),a=n(5063),s=n(8094),c=n(5785),l=n(4034),d=n(8105);function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings={fontClass:"cifra-mono",elements:{sheetSelector:".js-sheet_sizes",preContainer:".js-cifra_content"}},this.sheetSizes={A4:{name:"A4",sheetClass:"tam_a4",contentLength:1005,maxLineLength:[83,32]},legal:{name:"Ofício",sheetClass:"tam_oficio",contentLength:1230,maxLineLength:[83,32]},letter:{name:"Carta",sheetClass:"tam_carta",contentLength:960,maxLineLength:[83,32]}},this.sheetMainClass=".folha",this.currentSheetSize="A4",this.totalPages=1,this.pageFooterChordsInfo=[],this.baseScale=1,this.hasBaseScale=!1}var t,n,o;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i().extend(!0,this.settings,e),this.updateSheetSelector(),this.bindEvents(),this.managePages(),this.renderFooterChords()}},{key:"getSheetSizes",value:function(){var e=[];for(var t in this.sheetSizes)this.sheetSizes.hasOwnProperty(t)&&e.push({id:t,name:this.sheetSizes[t].name});return e}},{key:"setSheetSize",value:function(e){var t=this.getSheetSizes(),n="";for(var o in t)n+=this.sheetSizes[t[o].id].sheetClass+" ";return this.currentSheetSize=e,i()(this.sheetMainClass).removeClass(n).addClass(this.sheetSizes[e].sheetClass),this.managePages(),this}},{key:"markSelectedSheet",value:function(){i()(this.settings.elements.sheetSelector).val(this.currentSheetSize)}},{key:"addPage",value:function(){var e=i()(this.sheetMainClass).length+1,t=i()("<div>");t.attr("id","folha"+e),t.addClass("folha negrito_acorde "+this.sheetSizes[this.currentSheetSize].sheetClass),t.append(i()("<div>").addClass("wrap_pre ".concat(this.settings.fontClass," cifra_cnt js-cifra_content"))),t.append(i()("<small>").addClass("paginacao").html("Página ".concat(e,' / <span class="total"></span>')));var n=t.find(".wrap_pre");return n.append("<pre>"),a.t.splitColumns&&(n.addClass("cols"),n.find("pre").addClass("col1"),n.append(i()("<pre>").addClass("col2"))),a.t.fontSize!==s.J.standardFontSize&&n.css("fontSize",a.t.fontSize),i()(this.sheetMainClass+":last").after(t),this.updateSheetCount(),t}},{key:"removeLastPage",value:function(){i()(this.sheetMainClass).last().remove(),this.updateSheetCount()}},{key:"removePages",value:function(){i()(this.sheetMainClass+":not(:first)").remove(),i()(".cifra_acordes").remove()}},{key:"resetContent",value:function(){this.removePages(),i()(this.sheetMainClass).find("pre:not(:first)").remove(),i()(this.sheetMainClass).find("pre").html(a.t.originalCifraContent)}},{key:"managePages",value:function(){this.removePages();var e=i()(window).scrollTop(),t=i()("".concat(this.sheetMainClass,":last")),n=this.sheetSizes[this.currentSheetSize].maxLineLength[a.t.splitColumns?1:0];if(a.t.fontSize!==s.J.standardFontSize){var o=document.querySelector(".wrap_pre");o&&(n=Math.ceil(o.offsetWidth/(a.t.splitColumns?2:1)/(10+a.t.fontSize-14))-2)}var r=a.t.cifraContent.split(/\n/);t.find("pre").html("");var u=t.find("pre").eq(0);!1===a.t.splitColumns?(i()(this.settings.elements.preContainer).removeClass("cols"),u.removeClass("col1"),t.find("pre.col2").remove()):(i()(this.settings.elements.preContainer).addClass("cols"),u.addClass("col1"),0===i()(this.settings.elements.preContainer).find("pre.col2").length&&i()(this.settings.elements.preContainer).append(i()("<pre>").addClass("col2")));for(var f,h,g=[],p=!1,m=0,v=0;v<r.length;v++)if(h=r[v],(0,d.Q9)(r[v])){var y=(0,d.G5)(r,v);if(y.length){if(v+=y.length-1,a.t.showTabs){if(a.t.splitColumns){var C=c.qL(a.t.cifraContent);f=(f=(f=c.jv(C,n))[m]).replace(/(undefined)/g,"").replace(/,/g,""),m++}else f=y.join("\n");t=this.insertContent(t,i()(f))}}else a.t.splitColumns&&c.QL(),(0,d.Ik)(a.t.cifraId),t=this.insertContent(t,h.replace(/<\/?(.*?)>/gim,""))}else(0,d.pY)(h)?v+1<r.length&&!(0,d.pY)(r[v+1])&&!(0,d.Q9)(r[v+1])?(h=c.dT([h,r[v+1]],n),v++):h=c.UL(h,n,!0):h=c.UL(h,n,!1),t=this.insertContent(t,h);if(!0===a.t.splitColumns){g=[];var b=(r=(r=t.find("pre.col1").html()+t.find("pre.col2").html()).split(/\n/)).length/2-1;t.find("pre.col1").html(""),t.find("pre.col2").html("");for(var k=0;k<r.length;k++)-1!==(h=r[k]).toLowerCase().indexOf("</span>")&&!0===p?(p=!1,g.push(h),f=g.join("\n"),a.t.showTabs&&(t=this.insertContent(t,i()(f))),g=[]):-1!==h.toLowerCase().indexOf("<span ")&&-1!==h.toLowerCase().indexOf("tablatura")||!0===p?(p=!0,g.push(h)):((0,d.pY)(h)&&k+1<r.length&&!(0,d.pY)(r[k+1])&&!(0,d.Q9)(r[k+1])?(h+="\n".concat(r[k+1],"\n"),k++):h+="\n",t=this.insertContent(t,h,!1,k>b))}var S=i()("<div>").addClass("cifra_acordes").css("visibility","hidden").append(i()("<ul>")),T=S.find("ul");t.find(".paginacao").before(S),l.C.updateFooterChords();var w=T.find("li");w.detach();var _=0,O=!1;this.pageFooterChordsInfo=[];do{T.append(w.eq(_)),(T.height()||0)+(t.find(".js-cifra_content").height()||0)+(t.find(".js-cifra_header").height()||0)<=this.sheetSizes[this.currentSheetSize].contentLength?_+=1:(w.eq(_).detach(),t=this.addPage(),this.pageFooterChordsInfo.push({numChords:_,isVisible:!0,hasOnlyChords:O}),T=(S=i()("<div>").addClass("cifra_acordes").css("visibility","hidden").append(i()("<ul>"))).find("ul"),t.find(".paginacao").before(S),O=!0)}while(_<w.length);this.pageFooterChordsInfo.push({numChords:w.length,isVisible:!0,hasOnlyChords:O}),i()(".cifra_acordes").css("visibility",""),this.renderFooterChords(),this.updateSheetCount(),i()(document).trigger("print.pages"),i()(window).scrollTop(e),this.handleScale()}},{key:"renderFooterChords",value:function(){var e=this;if(!a.t.showFooterChords)return i()(this.pageFooterChordsInfo).each((function(t,n){n.hasOnlyChords&&(e.removeLastPage(),n.isVisible=!1)})),void i()(".cifra_acordes").find("li").remove();i()(this.pageFooterChordsInfo).each((function(t,n){if(!n.isVisible){var o=e.addPage(),r=i()("<div>").addClass("cifra_acordes").css("visibility","hidden").append(i()("<ul>"));o.find(".paginacao").before(r),n.isVisible=!0}}));var t=i()(".cifra_acordes");if(t.length>1){var n=t.find("li"),o=0,r=0;i()(this.pageFooterChordsInfo).each((function(e,a){var s=i()(t[e]);r=a.numChords,s.find("ul").html("");for(var c=o;c<r;c++)s.find("ul").append(n[c]);o=r}))}t.css("visibility","")}},{key:"insertContent",value:function(e,t,n,o){var r,a=e.find(".js-cifra_header"),s=e.find(".js-cifra_config"),c=e.find("pre"),l=!1,d=!1;if("string"==typeof t){var u=t.lastIndexOf("\n");-1!==u&&(t=t.substring(0,u)),t=i()("<span>"+t+"</span>"),l=!0}else t.hasClass("tablatura")&&(d=!0);var f=0;c.length>1&&c.eq(1).html().length&&(f=1);for(var h=!1,g=f;g<c.length&&!h;g++){var p=c.eq(g);p.append(t),(a.outerHeight(!0)||0)+(s.outerHeight(!0)||0)+(p.height()||0)<=this.sheetSizes[this.currentSheetSize].contentLength?o&&0===g||(!1===l&&!n||d?p.append("\n"):(t.detach(),p.append(t.html()).append("\n")),h=!0):(t.detach(),g+1>=c.length&&(r=this.insertContent(this.addPage(),t,!0)))}return r||e}},{key:"updateSheetSelector",value:function(){for(var e=i()(this.settings.elements.sheetSelector),t=this.getSheetSizes(),n=0;n<t.length;n++)e.append(new Option(t[n].name,t[n].id))}},{key:"bindEvents",value:function(){var e=this;i()(this.settings.elements.sheetSelector).change((function(t){(0,r.cifraEvent)("trocar_tamanho_folha",t.currentTarget.value),e.setSheetSize(t.currentTarget.value),i()(document).trigger("print.resize")}))}},{key:"updateSheetCount",value:function(){this.totalPages=i()(this.sheetMainClass).length,i()(".paginacao .total").html(this.totalPages)}},{key:"handleScale",value:function(){var e=window.innerWidth,t=e/860,n=document.querySelector(".pages"),o=document.getElementById("folha1");if(e<=768){n.style.transform="scale(".concat(t,")"),this.hasBaseScale||(this.hasBaseScale=!0,this.baseScale=t);var i=(e-o.getBoundingClientRect().width)/2;n.style.marginLeft="".concat(i,"px"),n.style.marginBottom=null;var r=document.getElementById("side-menu").getBoundingClientRect().height,a=n.getBoundingClientRect().height,s=document.documentElement.scrollHeight;n.style.marginBottom="".concat(a-s+r+100,"px"),n.style.opacity=1}else n.style.transform=null,n.style.marginLeft=null,n.style.marginBottom=null}},{key:"handleZoom",value:function(){var e=this,t=document.querySelector(".pages"),n=this.baseScale,o=t.style.transform,i={},r=function(e){return Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY)};t.addEventListener("touchstart",(function(e){2===e.touches.length&&(e.preventDefault(),i.x=(e.touches[0].pageX+e.touches[1].pageX)/2,i.y=(e.touches[0].pageY+e.touches[1].pageY)/2,i.distance=r(e))})),t.addEventListener("touchmove",(function(o){if(2===o.touches.length){o.preventDefault();var a=r(o)/i.distance*e.baseScale;n=Math.min(Math.max(e.baseScale,a),4);var s=2*((o.touches[0].pageX+o.touches[1].pageX)/2-i.x),c=2*((o.touches[0].pageY+o.touches[1].pageY)/2-i.y),l="translate3d(".concat(s,"px, ").concat(c,"px, 0) scale(").concat(n,")");t.style.transform=l,t.style.zIndex="999"}})),t.addEventListener("touchend",(function(){t.style.transform=o,t.style.zIndex=null}))}}],n&&u(t.prototype,n),o&&u(t,o),e}()),h="tinycolorpicker",g={colors:["#ffffff","#A7194B","#FE2712","#FB9902","#FABC02","#FEFE33","#D0EA2B","#66B032","#0391CE","#0247FE","#3D01A5","#8601AF"],backgroundUrl:null};function p(e,t){this.options=i().extend({},g,t),this._defaults=g,this._name=h;var n,o,r,a=this,s=e.find(".track"),c=e.find(".color"),l=null,d=e.find(".colorInput"),u=e.find(".dropdown"),f=u.find("li").remove(),p=null,m=!1,v=!!document.createElement("canvas").getContext,y="ontouchstart"in document.documentElement;function C(t){if(m){var n=i()(t.target).offset(),o=p.getImageData(t.pageX-n.left,t.pageY-n.top,1,1).data;a.setColor("rgb("+o[0]+","+o[1]+","+o[2]+")"),e.trigger("change",[a.colorHex,a.colorRGB])}}return this.colorHex="",this.colorRGB="",this.setColor=function(e){e.indexOf("#")>=0?(a.colorHex=e,a.colorRGB=a.hexToRgb(a.colorHex)):(a.colorRGB=e,a.colorHex=a.rgbToHex(a.colorRGB)),c.find(".colorInner").css("backgroundColor",a.colorHex),d.val(a.colorHex)},this.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"},this.rgbToHex=function(e){var t=e.match(/\d+/g);function n(e){var t=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(e)?"00":t[(e-e%16)/16]+t[e%16]}return"#"+n(t[0])+n(t[1])+n(t[2])},v?(l=i()("<canvas></canvas>"),s.append(l),p=l[0].getContext("2d"),n=new Image,o=s.css("background-image").replace(/"/g,"").replace(/url\(|\)$/gi,""),n.crossOrigin="Anonymous",s.css("background-image","none"),i()(n).on("load",(function(e){l.attr("width",e.currentTarget.width),l.attr("height",e.currentTarget.height),p.drawImage(n,0,0,e.currentTarget.width,e.currentTarget.height)})),n.src=a.options.backgroundUrl||o):i().each(a.options.colors,(function(e,t){var n=f.clone();n.css("backgroundColor",t),n.attr("data-color",t),u.append(n)})),r=y?"touchstart":"mousedown",v?(c.on(r,(function(e){e.preventDefault(),e.stopPropagation(),s.toggle(),i()(document).on("mousedown.colorpicker",(function(){i()(document).off(".colorpicker"),s.hide().trigger("closed")}))})),y?(l.on("touchstart",(function(e){return m=!0,C(e.originalEvent.touches[0]),!1})),l.on("touchmove",(function(e){return C(e.originalEvent.touches[0]),!1})),l.on("touchend",(function(e){return m=!1,s.hide().trigger("closed"),!1}))):(l.mousedown((function(e){return m=!0,C(e),i()(document).on("mouseup.colorpicker",(function(){return m=!1,i()(document).off(".colorpicker"),s.hide().trigger("closed"),!1})),!1})),l.mousemove(C))):(c.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),u.toggle()})),u.on("mousedown","li",(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=i()(e.currentTarget).attr("data-color");a.setColor(t),u.hide()}))),a}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}i().fn[h]=function(e){return this.each((function(){i().data(this,"plugin_"+h)||i().data(this,"plugin_"+h,new p(i()(this),e))}))};const v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.groups=[".js-title_color, .js-composer_color, .js-cifra_content",".js-artist_color, .js-cifra_content b, #cifra_capo a, #cifra_tom a, #cifra_afi a"],this.elements={defaultTextColor:"#js-color_texto .t_cor1",defaultChordColor:"#js-color_acorde .t_cor2",sheet:".folha",textBold:i()(".js-text_bold"),chordBold:i()(".js-chord_bold")},this.textColorpicker=i()("#js-text_colorpicker").tinycolorpicker(),this.chordColorpicker=i()("#js-chord_colorpicker").tinycolorpicker()}var t,n,o;return t=e,(n=[{key:"init",value:function(){this.bindEvents()}},{key:"changeColor",value:function(e,t){var n=i()(e),o=n.data("color");n.closest(".t_colorlist").find(".on").removeClass("on"),n.addClass("on"),i()(this.groups[t]).css("color",o)}},{key:"bindEvents",value:function(){var e=this;i()("#js-color_texto").on("click","a",(function(t){t.preventDefault(),(0,r.cifraEvent)("trocar_cor_texto","botao"),e.changeColor(t.currentTarget,0)})),i()("#js-color_acorde").on("click","a",(function(t){t.preventDefault(),(0,r.cifraEvent)("trocar_cor_acorde","botao"),e.changeColor(t.currentTarget,1)})),i()(".t_trocacor").click((function(e){e.preventDefault(),(0,r.cifraEvent)("abrir_colorpicker");var t=i()(e.currentTarget);t.hasClass("opened")?t.removeClass("opened"):(t.closest(".t_config").find(".colorInner").trigger("mousedown"),t.closest(".t_config").find(".colorInner").trigger("touchstart"),t.addClass("opened"),t.closest(".t_config").find(".colorpicker_close").show())})),i()(".colorpicker .track").on("closed",(function(){i()(".t_trocacor.opened").removeClass("opened"),i()(".colorpicker_close").hide()})),this.textColorpicker.on("change",(function(t){(0,r.cifraEvent)("trocar_cor_texto","colorpicker"),i()("#tc_texto").data("color",i()(t.currentTarget).find(".colorInput").val()),e.changeColor("#tc_texto",0),i()("#js-color_texto").find(".on").removeClass("on")})),this.chordColorpicker.on("change",(function(t){(0,r.cifraEvent)("trocar_cor_acorde","colorpicker"),i()("#tc_acorde").data("color",i()(t.currentTarget).find(".colorInput").val()),e.changeColor("#tc_acorde",1),i()("#js-color_acorde").find(".on").removeClass("on")})),this.elements.textBold.click((function(t){t.preventDefault(),(0,r.cifraEvent)("texto_negrito"),e.elements.textBold.toggleClass("ativo"),i()(e.elements.sheet).toggleClass("negrito_texto")})),this.elements.chordBold.click((function(t){t.preventDefault(),(0,r.cifraEvent)("acorde_negrito"),e.elements.chordBold.toggleClass("ativo"),i()(e.elements.sheet).toggleClass("negrito_acorde")}))}},{key:"updateColors",value:function(){var e=i()("#js-color_texto").find(".on"),t=i()("#js-color_acorde").find(".on");0===e.length&&(e="#tc_texto"),0===t.length&&(t="#tc_acorde"),this.changeColor(e,0),this.changeColor(t,1)}},{key:"reset",value:function(){this.changeColor(this.elements.defaultTextColor,0),this.changeColor(this.elements.defaultChordColor,1),this.elements.chordBold.addClass("ativo"),this.elements.textBold.removeClass("ativo"),i()(this.elements.sheet).removeClass("negrito_texto").addClass("negrito_acorde")}}])&&m(t.prototype,n),o&&m(t,o),e}());var y=n(3864),C=n(4839),b=n(8732),k=n(6484),S=n(3972),T=n(8817),w=n(8018),_=n(3248);function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var E=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;i()(document).off("song.chords").on("song.chords",(function(){e.onChords()})),i()(document).off("song.instrument").on("song.instrument",(function(t,n){e.onInstrument(n)})),i()(document).off("song.font").on("song.font",(function(){e.onFont()})),i()(document).off("song.columns").on("song.columns",(function(){e.onColumns()})),i()(document).off("song.pre-transpose").on("song.pre-transpose",(function(){e.onPreTranspose()})),i()(document).off("song.transpose").on("song.transpose",(function(){e.onTranspose()})),i()(document).off("song.tabs").on("song.tabs",(function(){e.onTabs()})),i()(document).off("song.settings").on("song.settings",(function(){e.onSettings()})),i()(document).off("print.pages").on("print.pages",(function(){e.onManagePages()})),i()(document).off("song.renderfooterchords").on("song.renderfooterchords",(function(){e.onRenderFooterChords()}))}},{key:"onChords",value:function(){(0,S.AG)(),l.C.updateFooterChords(),f.renderFooterChords(),y.Z.updateUI(),T.ZP.animateLabel(),T.ZP.updateHtml(),f.managePages()}},{key:"onInstrument",value:function(e){var t=-1!==_.TUNINGS.indexOf(a.t.tuning)?a.t.tuning:a.t.originalTuning,n=a.t.capo-_.TUNINGS.indexOf(t);w.j.updateModal(),a.t.chordMode===_.SongTypeSlug.KEYBOARD&&(a.t.showBodyChords=!1);var o="guitar"===a.t.chordMode||"guitar"!==a.t.chordMode&&(a.t.key!==a.t.originalKey||a.t.capo!==a.t.originalCapo||a.t.tuning!==a.t.originalTuning);e.blockTranspose||0===n||e.oldChordMode!==_.SongTypeSlug.GUITAR&&a.t.chordMode!==_.SongTypeSlug.GUITAR?this.onChords():T.ZP.setValue(a.t.key+n*(a.t.chordMode===_.SongTypeSlug.GUITAR?-1:1),o)}},{key:"onFont",value:function(){f.managePages()}},{key:"onColumns",value:function(){try{f.managePages()}catch(e){a.t.splitColumns&&(a.t.splitColumns=!1,w.j.elements.columnsCheck[0].checked=!1,f.managePages())}}},{key:"onTabs",value:function(){f.managePages()}},{key:"onPreTranspose",value:function(){i()(".pages").addClass("isLoading")}},{key:"onTranspose",value:function(){if(i()(".pages").removeClass("isLoading"),(0,S.AG)(),(0,d.Vx)(),this.onChords(),a.t.tabsError){var e=(0,T.$d)(a.t.key,a.t.capo,a.t.tuning);(0,b.O)(k.polyglot.t("song.tabsError",{key:e}))}}},{key:"onSettings",value:function(){C.Z.save()}},{key:"onManagePages",value:function(){v.updateColors()}},{key:"onRenderFooterChords",value:function(){l.C.updateFooterChords(),f.renderFooterChords()}}])&&O(t.prototype,n),o&&O(t,o),e}()),j=n(913),M=n(3132),x=n(5783),I=n(2762),P=n(6539);function L(e){a.t.songTitle=e.name,a.t.artistName=e.artist,a.t.originalCifraContent=i()(e.contentSelector).html(),a.t.cifraContent=a.t.originalCifraContent,a.t.container=".js-cifra_content",j.Z.init(e.instrument),v.init(),s.J.init({contentSelector:".js-cifra_content"}),f.init(),e.instrument===_.SongTypeSlug.CIFRA_GROUP&&((0,P.requestAudio)(),y.Z.init(e.capo,{sideModal:{position:"left",offset:"-183",className:"modal--right"}}),T.ZP.init(e.key,e.urlAPI3),w.j.init({modalPosition:"bottom left",modalOffset:"-45 -250"}),M.d.setChords(e.chords,!0),a.t.chordsNameFlag="altName",x.k.init(),l.C.init(),f.managePages()),E.init();var t=C.Z.init(!1);C.Z.hasInstrumentHash()||I.Z.sync(t);i()(".js-print").click((function(e){e.preventDefault(),["c-troca","c-afi","c-tom"].map((function(e){return document.getElementById(e).style.display="none"}));try{window.print()}catch(e){}})),i()(".js-reset_settings").click((function(e){e.preventDefault(),(0,r.cifraEvent)("resetar_configuracoes"),v.reset(),s.J.restoreSize(),a.t.instrument===_.SongTypeSlug.CIFRA_GROUP&&(T.ZP.reset(),y.Z.reset(),w.j.reset())})),window.addEventListener("resize",f.handleScale),f.handleZoom()}}}]);